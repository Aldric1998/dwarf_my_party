<body>
  <div class="descriptive">

  <div id="map"
     style="width: 100%; height: 300px;"
     data-markers="<%= @markers.to_json %>"
     data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>

    <div class="image-show">
      <% if @dwarf.picture.attached?%>
        <%= cl_image_tag @dwarf.picture.key, height: 300, width: 400, crop: :fill %>
      <%end%>
      <hr>
      <div class="text-image">
        <div id="welcome">
          <h2><strong> Name: <%= @dwarf.name %></strong></h1>
        </div>
        <h2 class="price-card"> price: <%= @dwarf.price %> € / day </h2>
        <p> description: <%= @dwarf.description %></p>
        <p> area: <%= @dwarf.localisation %></p>
      </div>
      <hr>
    </div>
    <p> <strong>These are the existing bookings : </strong><% @dwarf.offers.each do |offer| %></p>
      <p> <u>from:</u> <%= offer.starts_at %></p>
      <p> <u>until:</u> <%= offer.ends_at %></p>
      <p> <u>comment:</u> <%= offer.message %></p>
      <p><%= link_to 'cancel your booking', offer_path(offer), class: "btn btn-ghost", method: "delete", data: { confirm: "Are you sure?" }%></p>
    <% end %>
    <hr>
    <% @offers.each do |offer|%>
        <p><strong>Your review about your favorite dwarf: </strong><% @dwarf.offers.each do |offer| %></p>
          <p><%= offer.review.comment if offer.review%></p>
            <%if offer.review%>
              <% offer.review.rating.times do %>
              ⭐
              <% end %>
              <% (5 - offer.review.rating).times do %>
              ★
              <% end %>
            <%end%>
        <% end %>
      <% end %>
  </div>

  <div class="links">
  <p><%= link_to 'place your bookings here', new_dwarf_offer_path(@dwarf), class: "btn btn-ghost"%></p>
    <% @offers.each do |offer|%>
    <hr>
    <p><%= link_to 'review this dwarf', new_offer_review_path(offer), class: "btn btn-ghost"%> </p>
    <% end %>
  </div>
</body>
